<div>
  <div class="actual-content">
    <div class="actual-content-title">
      <!--<div class="actual-title-con">-->
      <!--<h2>病情分析</h2>-->
      <!--<img src="assets/img/app/underline.png" alt="">-->
      <!--</div>-->
      <div class="case-history-info">
        <form [formGroup]="caseHistoryForm" (ngSubmit)="onSubmit(caseHistoryForm.value)" *ngIf="caseHistoryForm">
          <div class="container" [ngSwitch]="step">
            <a *ngSwitchDefault href="" class="btn upload-case-history" [ngClass]="{'disabled':viewBtn}">上传电子病历</a>
            <div *ngSwitchDefault>
              <div class="register-form">
                <span style="font-size: 1.75rem;">粉尘作业人员信息登记表</span>
              </div>
              <div class="row ">
                <div class="col">
                  <div class="form-group row">
                    <label class="col-3 col-form-label">姓名</label>
                    <div class="col-8">
                      <input type="text" class="form-control" placeholder="请输入姓名" aria-describedby="sizing-addon1"
                             formControlName="patientName">
                    </div>
                  </div>
                </div>
                <div class="col">
                  <div class="form-group row">
                    <label class="col-3 col-form-label">性别</label>
                    <div class="col-8">
                      <select class="form-control" formControlName="sex">
                        <option value="" selected>请选择性别</option>
                        <option value="男">男</option>
                        <option value="女">女</option>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="col">
                  <div class="form-group row">
                    <label class="col-3 col-form-label">身高</label>
                    <div class="col-8">
                      <input type="text" class="form-control" placeholder="请输入身高" aria-describedby="sizing-addon1"
                             formControlName="stature">
                    </div>
                  </div>
                </div>
              </div>
              <div class="row ">
                <div class="col">
                  <div class="form-group row">
                    <label class="col-3 col-form-label">体重</label>
                    <div class="col-8">
                      <input type="text" class="form-control" placeholder="请输入体重" aria-describedby="sizing-addon1"
                             formControlName="weight">
                    </div>
                  </div>
                </div>
                <div class="col">
                  <div class="form-group row">
                    <label class="col-3 col-form-label">出生日期</label>
                    <div class="col-6">
                      <datepicker (onSelected)="updateDateRange($event)"></datepicker>
                    </div>
                  </div>
                  <!--<div class="input-group input-group-lg">-->
                  <!--<datepicker (onSelected)="updateDateRange($event)"></datepicker>-->
                  <!--</div>-->
                </div>
                <div class="col">
                  <div class="form-group row">
                    <label class="col-3 col-form-label">年龄</label>
                    <div class="col-8">
                      <input type="text" class="form-control" placeholder="" aria-describedby="sizing-addon1"
                             formControlName="age">
                    </div>
                  </div>
                </div>

              </div>
              <div class="row ">
                <div class="col">
                  <div class="form-group row">
                    <label class="col-3 col-form-label">身份证</label>
                    <div class="col-8">
                      <input #personId type="text" class="form-control" placeholder="请输入身份证号"
                             aria-describedby="sizing-addon1"
                             formControlName="pid" (click)="validatePID()">
                      <!--<span class="input-group-addon" id="sizing-addon4"><i class="fa fa-id-card-o"-->
                      <!--aria-hidden="true"></i></span>-->
                      <span *ngIf="pidValidate" style="color:red;">该患者已存在</span>
                    </div>
                  </div>
                </div>
                <div class="col">
                  <div class="form-group row">
                    <label class="col-3 col-form-label">电话</label>
                    <div class="col-8">
                      <input type="text" class="form-control" placeholder="请输入电话" aria-describedby="sizing-addon1"
                             formControlName="tel">
                    </div>
                  </div>
                </div>
                <div class="col">
                  <div class="form-group row">
                    <label class="col-3 col-form-label">工种</label>
                    <div class="col-8">
                      <input type="text" class="form-control" placeholder="请输入工种" aria-describedby="sizing-addon1"
                             formControlName="job">
                    </div>
                  </div>
                </div>
              </div>
              <div class="row ">
                <div class="col">
                  <div class="form-group row">
                    <label class="col-3 col-form-label">工龄</label>
                    <div class="col-8">
                      <input type="text" class="form-control" placeholder="请输入工龄" aria-describedby="sizing-addon1"
                             formControlName="dustAge">
                    </div>
                  </div>
                </div>

                <div class="col">
                  <div class="form-group row">
                    <label class="col-3 col-form-label">粉尘性质</label>
                    <div class="col-8">
                      <select class="form-control" formControlName="dustProperty">
                        <option value="" selected>请选择粉尘性质</option>
                        <option value="矽尘">矽尘</option>
                        <option value="煤工粉尘">煤工粉尘</option>
                        <option value="石墨粉尘">石墨粉尘</option>
                        <option value="炭黑粉尘">炭黑粉尘</option>
                        <option value="石棉尘">石棉尘</option>
                        <option value="滑石粉尘">滑石粉尘</option>
                        <option value="水泥粉尘">水泥粉尘</option>
                        <option value="云母粉尘">云母粉尘</option>
                        <option value="陶工粉尘">陶工粉尘</option>
                        <option value="铝尘">铝尘</option>
                        <option value="电焊工粉尘">电焊工粉尘</option>
                        <option value="铸工粉尘">铸工粉尘</option>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="col">
                  <div class="form-group row">
                    <label class="col-3 col-form-label">并发症</label>
                    <div class="col-8">
                      <select class="form-control" formControlName="complication">
                        <option value="" selected>请选择并发症</option>
                        <option value="无">无</option>
                        <option value="肺内感染">肺内感染</option>
                        <option value="肺癌">肺癌</option>
                        <option value="胸膜间皮瘤">胸膜间皮瘤</option>
                        <option value="自发性气胸">自发性气胸</option>
                        <option value="肺结核">肺结核</option>
                        <option value="慢性肺源性心脏病">慢性肺源性心脏病</option>
                        <option value="慢性阻塞性肺疾病">慢性阻塞性肺疾病</option>
                        <option value="支气管扩张">支气管扩张</option>
                        <option value="支气管哮喘">支气管哮喘</option>
                      </select>

                    </div>
                  </div>
                </div>
              </div>
              <div class="row ">
                <div class="col-4">
                  <div class="form-group row">
                    <label class="col-3 col-form-label">是否吸烟</label>
                    <div class="col-8">
                      <select class="form-control" formControlName="smoke">
                        <option value="0">否</option>
                        <option value="1">是</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>
              <div class="career">
                <textarea type="text" placeholder="    请输入您的职业史" formControlName="jobHistory"></textarea>
              </div>
              <div class="medicine-history">
                <medical-history [(medicalHistory)]="medicalHistoryList"></medical-history>
              </div>
              <div class="next-step">
                <button type="button" class="btn btn-primary" (click)="step='secondStep'">下一步</button>
              </div>
            </div>
            <div *ngSwitchCase="'secondStep'">
              <div class="register-form" style="padding-top: 23px;">
                <span style="font-size: 1.75rem;">粉尘作业人员临床化验信息</span>
              </div>
              <div class="row">
                <label class="col-sm-2 control-label">上传临床化验单</label>
                <div class="col-sm-10">
                  <file-upload [url]="fileUploadUrl" [name]="'huayan'" [fileSizeLimit]="sizeLimit"
                               [disable]="disableUpload"
                               (onFinishUploading)="onFinishUploading($event)"
                               (onUploading)="onFileUploading($event)"></file-upload>
                </div>
              </div>
              <div class="row next-step">
                <div class="col">
                  <button type="button" class="btn btn-primary" (click)="step='firstStep'">上一步</button>
                </div>
                <div class="col">
                  <button type="button" class="btn btn-primary" (click)="step='thirdStep'">下一步</button>
                </div>
              </div>
            </div>
            <div *ngSwitchCase="'thirdStep'">
              <div class="register-form" style="padding-top: 23px;">
                <span style="font-size: 1.75rem;">粉尘作业人员专项检查信息（胸部x射线）</span>
              </div>
              <div class="form-group row">
                <!--<div class="col-sm-2 control-label col-form-label">-->
                  <label  class="col-2 col-form-label">上传x光片</label>
                  <!--<p>x光片及肺功能</p>-->
                <!--</div>-->
                  <div class="col-10">
                    <file-upload [url]="fileUploadUrl" [name]="fileName" [fileSizeLimit]="sizeLimit"
                                 [disable]="disableUpload"
                                 (onFinishUploading)="onFinishUploading($event)"
                                 (onUploading)="onFileUploading($event)"></file-upload>
                  </div>
              </div>
              <div class="row">
                <div class="col-2 control-label">
                  <p>上传肺功能</p>
                </div>
                <div class="col-10">
                  <file-upload [url]="fileUploadUrl" [name]="'fei'" [fileSizeLimit]="sizeLimit"
                               [disable]="disableUpload"
                               (onFinishUploading)="onFinishUploading($event)"
                               (onUploading)="onFileUploading($event)"></file-upload>
                </div>
              </div>
              <div class="row next-step">
                <div class="col">
                  <button type="button" class="btn btn-primary" (click)="step='secondStep'">上一步</button>
                </div>
                <div class="col">
                  <button type="submit" class="btn btn-primary analyze">智能分析</button>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
